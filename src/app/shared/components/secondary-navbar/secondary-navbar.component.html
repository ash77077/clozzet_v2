<nav class="secondary-navbar" *ngIf="isAuthenticated">
  <div class="secondary-navbar-container">
    <!-- Main Admin Navigation -->
    <div class="nav-section" *ngIf="isAdminOrManager()">
      <div class="nav-group">
        <ul class="nav-list">
          <li class="nav-item">
            <a routerLink="/dashboard" class="nav-link" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
              <i class="pi pi-home"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/orders" class="nav-link" routerLinkActive="active">
              <i class="pi pi-shopping-cart"></i>
              <span>Orders</span>
              <span class="badge" *ngIf="orderStats && orderStats.pending > 0">{{ orderStats.pending }}</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/manufacturing" class="nav-link" routerLinkActive="active">
              <i class="pi pi-cog"></i>
              <span>Manufacturing</span>
              <span class="badge urgent" *ngIf="orderStats && orderStats.inProgress > 0">{{ orderStats.inProgress }}</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/users" class="nav-link" routerLinkActive="active">
              <i class="pi pi-users"></i>
              <span>Users</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/companies" class="nav-link" routerLinkActive="active">
              <i class="pi pi-building"></i>
              <span>Companies</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/product-management" class="nav-link" routerLinkActive="active">
              <i class="pi pi-box"></i>
              <span>Products</span>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Customer/User Navigation -->
    <div class="nav-section" *ngIf="isCustomerOrUser()">
      <div class="nav-group">
        <h4 class="nav-group-title">My Account</h4>
        <ul class="nav-list">
          <li class="nav-item">
            <a routerLink="/dashboard" class="nav-link" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
              <i class="pi pi-home"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/my-orders" class="nav-link" routerLinkActive="active">
              <i class="pi pi-shopping-bag"></i>
              <span>My Orders</span>
              <span class="badge" *ngIf="userOrderStats && userOrderStats.total > 0">{{ userOrderStats.total }}</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/order-blank" class="nav-link" routerLinkActive="active">
              <i class="pi pi-file-plus"></i>
              <span>New Order</span>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="nav-section quick-actions">
      <div class="nav-group">
        <div class="action-buttons">
          <button
            *ngIf="isAdminOrManager()"
            class="btn btn-sm btn-primary"
            routerLink="/order-blank"
            pTooltip="Create new order">
            <i class="pi pi-plus"></i>
            New Order
          </button>
          <button 
            *ngIf="isAdminOrManager()" 
            class="btn btn-sm btn-secondary" 
            (click)="exportData()"
            pTooltip="Export reports">
            <i class="pi pi-download"></i>
            Export
          </button>
          <button 
            class="btn btn-sm btn-info" 
            (click)="refreshData()"
            pTooltip="Refresh data">
            <i class="pi pi-refresh"></i>
            Refresh
          </button>
        </div>
      </div>
    </div>

    <!-- User Icon & Dropdown -->
    <div class="nav-section user-section">
      <div class="user-dropdown-container" *ngIf="currentUser">
        <button class="user-icon-btn" (click)="toggleUserMenu($event)" pTooltip="User menu">
          <i class="pi pi-user"></i>
        </button>

        <!-- User Dropdown Menu -->
        <div class="user-dropdown-menu" [class.active]="showUserMenu">
          <div class="user-dropdown-header">
            <div class="user-avatar">
              <i class="pi pi-user"></i>
            </div>
            <div class="user-info">
              <span class="user-name">{{ currentUser.firstName }} {{ currentUser.lastName }}</span>
              <span class="user-email">{{ currentUser.email }}</span>
              <span class="user-role-badge">{{ currentUser.role | titlecase }}</span>
            </div>
          </div>
          <div class="user-dropdown-divider"></div>
          <button class="user-dropdown-item" routerLink="/dashboard" (click)="showUserMenu = false">
            <i class="pi pi-home"></i>
            Dashboard
          </button>
          <div class="user-dropdown-divider"></div>
          <div class="user-dropdown-section">
            <span class="user-dropdown-section-title">
              <i class="pi pi-globe"></i>
              {{ 'navbar.language' | translate }}
            </span>
            <button
              *ngFor="let lang of languages"
              class="user-dropdown-item language-item"
              [class.active]="currentLanguage === lang.code"
              (click)="switchLanguage(lang.code)">
              <span class="flag">{{ lang.flag }}</span>
              <span class="lang-name">{{ lang.name }}</span>
              <i *ngIf="currentLanguage === lang.code" class="pi pi-check check-icon"></i>
            </button>
          </div>
          <div class="user-dropdown-divider"></div>
          <button class="user-dropdown-item logout" (click)="logout()">
            <i class="pi pi-sign-out"></i>
            Logout
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>
